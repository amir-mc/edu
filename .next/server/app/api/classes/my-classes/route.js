/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/classes/my-classes/route";
exports.ids = ["app/api/classes/my-classes/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fclasses%2Fmy-classes%2Froute&page=%2Fapi%2Fclasses%2Fmy-classes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclasses%2Fmy-classes%2Froute.ts&appDir=%2Froot%2Fschool%2Fedu%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Froot%2Fschool%2Fedu&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fclasses%2Fmy-classes%2Froute&page=%2Fapi%2Fclasses%2Fmy-classes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclasses%2Fmy-classes%2Froute.ts&appDir=%2Froot%2Fschool%2Fedu%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Froot%2Fschool%2Fedu&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _root_school_edu_src_app_api_classes_my_classes_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/classes/my-classes/route.ts */ \"(rsc)/./src/app/api/classes/my-classes/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/classes/my-classes/route\",\n        pathname: \"/api/classes/my-classes\",\n        filename: \"route\",\n        bundlePath: \"app/api/classes/my-classes/route\"\n    },\n    resolvedPagePath: \"/root/school/edu/src/app/api/classes/my-classes/route.ts\",\n    nextConfigOutput,\n    userland: _root_school_edu_src_app_api_classes_my_classes_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZjbGFzc2VzJTJGbXktY2xhc3NlcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGY2xhc3NlcyUyRm15LWNsYXNzZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZjbGFzc2VzJTJGbXktY2xhc3NlcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZyb290JTJGc2Nob29sJTJGZWR1JTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZyb290JTJGc2Nob29sJTJGZWR1JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PXN0YW5kYWxvbmUmcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDUTtBQUNyRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL3Jvb3Qvc2Nob29sL2VkdS9zcmMvYXBwL2FwaS9jbGFzc2VzL215LWNsYXNzZXMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwic3RhbmRhbG9uZVwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jbGFzc2VzL215LWNsYXNzZXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jbGFzc2VzL215LWNsYXNzZXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NsYXNzZXMvbXktY2xhc3Nlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9yb290L3NjaG9vbC9lZHUvc3JjL2FwcC9hcGkvY2xhc3Nlcy9teS1jbGFzc2VzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fclasses%2Fmy-classes%2Froute&page=%2Fapi%2Fclasses%2Fmy-classes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclasses%2Fmy-classes%2Froute.ts&appDir=%2Froot%2Fschool%2Fedu%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Froot%2Fschool%2Fedu&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/classes/my-classes/route.ts":
/*!*************************************************!*\
  !*** ./src/app/api/classes/my-classes/route.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n\n\n\nasync function GET() {\n    try {\n        const session = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.getSession)();\n        if (!session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        let classes;\n        if (session.user.role === \"teacher\") {\n            // Find the teacher record associated with this user\n            const teachers = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getTeachers();\n            const teacher = teachers.find((t)=>t.userId === session.user.id);\n            if (!teacher) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    message: \"Teacher profile not found\"\n                }, {\n                    status: 404\n                });\n            }\n            classes = await Promise.all(teacher.classIds.map((id)=>_lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getClassById(id)));\n        } else if (session.user.role === \"student\") {\n            // Find the student record associated with this user\n            const students = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getStudents();\n            const student = students.find((s)=>s.userId === session.user.id);\n            if (!student) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    message: \"Student profile not found\"\n                }, {\n                    status: 404\n                });\n            }\n            classes = await Promise.all(student.classIds.map((id)=>_lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getClassById(id)));\n        } else if (session.user.role === \"principal\") {\n            // Principals can see all classes\n            classes = await _lib_db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getClasses();\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Unauthorized to view classes\"\n            }, {\n                status: 401\n            });\n        }\n        // Filter out any null values (in case a class ID no longer exists)\n        const validClasses = (classes || []).filter(Boolean);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            classes: validClasses\n        });\n    } catch (error) {\n        console.error(\"Error fetching classes:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"An error occurred while fetching classes\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9jbGFzc2VzL215LWNsYXNzZXMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEwQztBQUNIO0FBQ2Q7QUFFbEIsZUFBZUc7SUFDcEIsSUFBSTtRQUNGLE1BQU1DLFVBQVUsTUFBTUgscURBQVVBO1FBRWhDLElBQUksQ0FBQ0csU0FBUztZQUNaLE9BQU9KLHFEQUFZQSxDQUFDSyxJQUFJLENBQ3RCO2dCQUFFQyxTQUFTO1lBQWUsR0FDMUI7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLElBQUlDO1FBRUosSUFBSUosUUFBUUssSUFBSSxDQUFDQyxJQUFJLEtBQUssV0FBVztZQUNuQyxvREFBb0Q7WUFDcEQsTUFBTUMsV0FBVyxNQUFNVCwrQ0FBRUEsQ0FBQ1UsV0FBVztZQUNyQyxNQUFNQyxVQUFVRixTQUFTRyxJQUFJLENBQUNDLENBQUFBLElBQUtBLEVBQUVDLE1BQU0sS0FBS1osUUFBUUssSUFBSSxDQUFDUSxFQUFFO1lBRS9ELElBQUksQ0FBQ0osU0FBUztnQkFDWixPQUFPYixxREFBWUEsQ0FBQ0ssSUFBSSxDQUN0QjtvQkFBRUMsU0FBUztnQkFBNEIsR0FDdkM7b0JBQUVDLFFBQVE7Z0JBQUk7WUFFbEI7WUFFQUMsVUFBVSxNQUFNVSxRQUFRQyxHQUFHLENBQ3pCTixRQUFRTyxRQUFRLENBQUNDLEdBQUcsQ0FBQ0osQ0FBQUEsS0FBTWYsK0NBQUVBLENBQUNvQixZQUFZLENBQUNMO1FBRS9DLE9BQU8sSUFBSWIsUUFBUUssSUFBSSxDQUFDQyxJQUFJLEtBQUssV0FBVztZQUMxQyxvREFBb0Q7WUFDcEQsTUFBTWEsV0FBVyxNQUFNckIsK0NBQUVBLENBQUNzQixXQUFXO1lBQ3JDLE1BQU1DLFVBQVVGLFNBQVNULElBQUksQ0FBQ1ksQ0FBQUEsSUFBS0EsRUFBRVYsTUFBTSxLQUFLWixRQUFRSyxJQUFJLENBQUNRLEVBQUU7WUFFL0QsSUFBSSxDQUFDUSxTQUFTO2dCQUNaLE9BQU96QixxREFBWUEsQ0FBQ0ssSUFBSSxDQUN0QjtvQkFBRUMsU0FBUztnQkFBNEIsR0FDdkM7b0JBQUVDLFFBQVE7Z0JBQUk7WUFFbEI7WUFFQUMsVUFBVSxNQUFNVSxRQUFRQyxHQUFHLENBQ3pCTSxRQUFRTCxRQUFRLENBQUNDLEdBQUcsQ0FBQ0osQ0FBQUEsS0FBTWYsK0NBQUVBLENBQUNvQixZQUFZLENBQUNMO1FBRS9DLE9BQU8sSUFBSWIsUUFBUUssSUFBSSxDQUFDQyxJQUFJLEtBQUssYUFBYTtZQUM1QyxpQ0FBaUM7WUFDakNGLFVBQVUsTUFBTU4sK0NBQUVBLENBQUN5QixVQUFVO1FBQy9CLE9BQU87WUFDTCxPQUFPM0IscURBQVlBLENBQUNLLElBQUksQ0FDdEI7Z0JBQUVDLFNBQVM7WUFBK0IsR0FDMUM7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLG1FQUFtRTtRQUNuRSxNQUFNcUIsZUFBZSxDQUFDcEIsV0FBVyxFQUFFLEVBQUVxQixNQUFNLENBQUNDO1FBRTVDLE9BQU85QixxREFBWUEsQ0FBQ0ssSUFBSSxDQUFDO1lBQUVHLFNBQVNvQjtRQUFhO0lBQ25ELEVBQUUsT0FBT0csT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPL0IscURBQVlBLENBQUNLLElBQUksQ0FDdEI7WUFBRUMsU0FBUztRQUEyQyxHQUN0RDtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsiL3Jvb3Qvc2Nob29sL2VkdS9zcmMvYXBwL2FwaS9jbGFzc2VzL215LWNsYXNzZXMvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCJcbmltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tIFwiQC9saWIvYXV0aFwiXG5pbXBvcnQgZGIgZnJvbSBcIkAvbGliL2RiXCJcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbigpXG4gICAgXG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgbWVzc2FnZTogXCJVbmF1dGhvcml6ZWRcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgIClcbiAgICB9XG4gICAgXG4gICAgbGV0IGNsYXNzZXNcbiAgICBcbiAgICBpZiAoc2Vzc2lvbi51c2VyLnJvbGUgPT09IFwidGVhY2hlclwiKSB7XG4gICAgICAvLyBGaW5kIHRoZSB0ZWFjaGVyIHJlY29yZCBhc3NvY2lhdGVkIHdpdGggdGhpcyB1c2VyXG4gICAgICBjb25zdCB0ZWFjaGVycyA9IGF3YWl0IGRiLmdldFRlYWNoZXJzKClcbiAgICAgIGNvbnN0IHRlYWNoZXIgPSB0ZWFjaGVycy5maW5kKHQgPT4gdC51c2VySWQgPT09IHNlc3Npb24udXNlci5pZClcbiAgICAgIFxuICAgICAgaWYgKCF0ZWFjaGVyKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IG1lc3NhZ2U6IFwiVGVhY2hlciBwcm9maWxlIG5vdCBmb3VuZFwiIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY2xhc3NlcyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICB0ZWFjaGVyLmNsYXNzSWRzLm1hcChpZCA9PiBkYi5nZXRDbGFzc0J5SWQoaWQpKVxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoc2Vzc2lvbi51c2VyLnJvbGUgPT09IFwic3R1ZGVudFwiKSB7XG4gICAgICAvLyBGaW5kIHRoZSBzdHVkZW50IHJlY29yZCBhc3NvY2lhdGVkIHdpdGggdGhpcyB1c2VyXG4gICAgICBjb25zdCBzdHVkZW50cyA9IGF3YWl0IGRiLmdldFN0dWRlbnRzKClcbiAgICAgIGNvbnN0IHN0dWRlbnQgPSBzdHVkZW50cy5maW5kKHMgPT4gcy51c2VySWQgPT09IHNlc3Npb24udXNlci5pZClcbiAgICAgIFxuICAgICAgaWYgKCFzdHVkZW50KSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IG1lc3NhZ2U6IFwiU3R1ZGVudCBwcm9maWxlIG5vdCBmb3VuZFwiIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY2xhc3NlcyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBzdHVkZW50LmNsYXNzSWRzLm1hcChpZCA9PiBkYi5nZXRDbGFzc0J5SWQoaWQpKVxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoc2Vzc2lvbi51c2VyLnJvbGUgPT09IFwicHJpbmNpcGFsXCIpIHtcbiAgICAgIC8vIFByaW5jaXBhbHMgY2FuIHNlZSBhbGwgY2xhc3Nlc1xuICAgICAgY2xhc3NlcyA9IGF3YWl0IGRiLmdldENsYXNzZXMoKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgbWVzc2FnZTogXCJVbmF1dGhvcml6ZWQgdG8gdmlldyBjbGFzc2VzXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApXG4gICAgfVxuICAgIFxuICAgIC8vIEZpbHRlciBvdXQgYW55IG51bGwgdmFsdWVzIChpbiBjYXNlIGEgY2xhc3MgSUQgbm8gbG9uZ2VyIGV4aXN0cylcbiAgICBjb25zdCB2YWxpZENsYXNzZXMgPSAoY2xhc3NlcyB8fCBbXSkuZmlsdGVyKEJvb2xlYW4pXG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgY2xhc3NlczogdmFsaWRDbGFzc2VzIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGNsYXNzZXM6XCIsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgbWVzc2FnZTogXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBjbGFzc2VzXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFNlc3Npb24iLCJkYiIsIkdFVCIsInNlc3Npb24iLCJqc29uIiwibWVzc2FnZSIsInN0YXR1cyIsImNsYXNzZXMiLCJ1c2VyIiwicm9sZSIsInRlYWNoZXJzIiwiZ2V0VGVhY2hlcnMiLCJ0ZWFjaGVyIiwiZmluZCIsInQiLCJ1c2VySWQiLCJpZCIsIlByb21pc2UiLCJhbGwiLCJjbGFzc0lkcyIsIm1hcCIsImdldENsYXNzQnlJZCIsInN0dWRlbnRzIiwiZ2V0U3R1ZGVudHMiLCJzdHVkZW50IiwicyIsImdldENsYXNzZXMiLCJ2YWxpZENsYXNzZXMiLCJmaWx0ZXIiLCJCb29sZWFuIiwiZXJyb3IiLCJjb25zb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/classes/my-classes/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkRole: () => (/* binding */ checkRole),\n/* harmony export */   getSession: () => (/* binding */ getSession),\n/* harmony export */   login: () => (/* binding */ login),\n/* harmony export */   logout: () => (/* binding */ logout),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   signJwtToken: () => (/* binding */ signJwtToken),\n/* harmony export */   verifyJwtToken: () => (/* binding */ verifyJwtToken)\n/* harmony export */ });\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/sign.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./db */ \"(rsc)/./src/lib/db.ts\");\n\n\n\n\n// This would be stored in an environment variable in production\nconst JWT_SECRET = new TextEncoder().encode('your-secret-key');\nasync function signJwtToken(user) {\n    const token = await new jose__WEBPACK_IMPORTED_MODULE_3__.SignJWT({\n        id: user.id,\n        email: user.email,\n        role: user.role,\n        name: user.name\n    }).setProtectedHeader({\n        alg: 'HS256'\n    }).setIssuedAt().setExpirationTime('12h').sign(JWT_SECRET);\n    return token;\n}\nasync function verifyJwtToken(token) {\n    try {\n        const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.jwtVerify)(token, JWT_SECRET);\n        return payload;\n    } catch (error) {\n        return null;\n    }\n}\nasync function login(email, password) {\n    // In a real app, we would verify the password against a hashed value in the database\n    // For this demo, we're just checking if the user exists\n    const user = await _db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getUserByEmail(email);\n    if (!user) {\n        return null;\n    }\n    // In a real app, we would verify the password here\n    // For demo purposes, let's assume the password is correct\n    const token = await signJwtToken(user);\n    return {\n        user,\n        token\n    };\n}\nasync function logout() {\n    (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)().delete('token');\n}\nasync function getSession() {\n    const token = (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)().get('token')?.value;\n    if (!token) return null;\n    const payload = await verifyJwtToken(token);\n    if (!payload) return null;\n    const user = await _db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getUserById(payload.id);\n    if (!user) return null;\n    return {\n        user\n    };\n}\nasync function requireAuth(req) {\n    const token = req.cookies.get('token')?.value;\n    if (!token) {\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL('/login', req.url));\n    }\n    const payload = await verifyJwtToken(token);\n    if (!payload) {\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.redirect(new URL('/login', req.url));\n    }\n    return null; // No redirect needed, user is authenticated\n}\nasync function checkRole(allowedRoles) {\n    const session = await getSession();\n    if (!session) return false;\n    return allowedRoles.includes(session.user.role);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQTBDO0FBQ0g7QUFDaUI7QUFDbEM7QUFHdEIsZ0VBQWdFO0FBQ2hFLE1BQU1LLGFBQWEsSUFBSUMsY0FBY0MsTUFBTSxDQUFDO0FBRXJDLGVBQWVDLGFBQWFDLElBQVU7SUFDM0MsTUFBTUMsUUFBUSxNQUFNLElBQUlULHlDQUFPQSxDQUFDO1FBQzlCVSxJQUFJRixLQUFLRSxFQUFFO1FBQ1hDLE9BQU9ILEtBQUtHLEtBQUs7UUFDakJDLE1BQU1KLEtBQUtJLElBQUk7UUFDZkMsTUFBTUwsS0FBS0ssSUFBSTtJQUNqQixHQUNHQyxrQkFBa0IsQ0FBQztRQUFFQyxLQUFLO0lBQVEsR0FDbENDLFdBQVcsR0FDWEMsaUJBQWlCLENBQUMsT0FDbEJDLElBQUksQ0FBQ2Q7SUFFUixPQUFPSztBQUNUO0FBRU8sZUFBZVUsZUFBZVYsS0FBYTtJQUNoRCxJQUFJO1FBQ0YsTUFBTSxFQUFFVyxPQUFPLEVBQUUsR0FBRyxNQUFNckIsK0NBQVNBLENBQUNVLE9BQU9MO1FBQzNDLE9BQU9nQjtJQUNULEVBQUUsT0FBT0MsT0FBTztRQUNkLE9BQU87SUFDVDtBQUNGO0FBRU8sZUFBZUMsTUFBTVgsS0FBYSxFQUFFWSxRQUFnQjtJQUN6RCxxRkFBcUY7SUFDckYsd0RBQXdEO0lBQ3hELE1BQU1mLE9BQU8sTUFBTUwsMkNBQUVBLENBQUNxQixjQUFjLENBQUNiO0lBQ3JDLElBQUksQ0FBQ0gsTUFBTTtRQUNULE9BQU87SUFDVDtJQUVBLG1EQUFtRDtJQUNuRCwwREFBMEQ7SUFFMUQsTUFBTUMsUUFBUSxNQUFNRixhQUFhQztJQUNqQyxPQUFPO1FBQUVBO1FBQU1DO0lBQU07QUFDdkI7QUFFTyxlQUFlZ0I7SUFDcEJ4QixxREFBT0EsR0FBR3lCLE1BQU0sQ0FBQztBQUNuQjtBQUVPLGVBQWVDO0lBQ3BCLE1BQU1sQixRQUFRUixxREFBT0EsR0FBRzJCLEdBQUcsQ0FBQyxVQUFVQztJQUN0QyxJQUFJLENBQUNwQixPQUFPLE9BQU87SUFFbkIsTUFBTVcsVUFBVSxNQUFNRCxlQUFlVjtJQUNyQyxJQUFJLENBQUNXLFNBQVMsT0FBTztJQUVyQixNQUFNWixPQUFPLE1BQU1MLDJDQUFFQSxDQUFDMkIsV0FBVyxDQUFDVixRQUFRVixFQUFFO0lBQzVDLElBQUksQ0FBQ0YsTUFBTSxPQUFPO0lBRWxCLE9BQU87UUFBRUE7SUFBSztBQUNoQjtBQUVPLGVBQWV1QixZQUFZQyxHQUFnQjtJQUNoRCxNQUFNdkIsUUFBUXVCLElBQUkvQixPQUFPLENBQUMyQixHQUFHLENBQUMsVUFBVUM7SUFDeEMsSUFBSSxDQUFDcEIsT0FBTztRQUNWLE9BQU9QLHFEQUFZQSxDQUFDK0IsUUFBUSxDQUFDLElBQUlDLElBQUksVUFBVUYsSUFBSUcsR0FBRztJQUN4RDtJQUVBLE1BQU1mLFVBQVUsTUFBTUQsZUFBZVY7SUFDckMsSUFBSSxDQUFDVyxTQUFTO1FBQ1osT0FBT2xCLHFEQUFZQSxDQUFDK0IsUUFBUSxDQUFDLElBQUlDLElBQUksVUFBVUYsSUFBSUcsR0FBRztJQUN4RDtJQUVBLE9BQU8sTUFBTSw0Q0FBNEM7QUFDM0Q7QUFFTyxlQUFlQyxVQUFVQyxZQUFzQjtJQUNwRCxNQUFNQyxVQUFVLE1BQU1YO0lBQ3RCLElBQUksQ0FBQ1csU0FBUyxPQUFPO0lBRXJCLE9BQU9ELGFBQWFFLFFBQVEsQ0FBQ0QsUUFBUTlCLElBQUksQ0FBQ0ksSUFBSTtBQUNoRCIsInNvdXJjZXMiOlsiL3Jvb3Qvc2Nob29sL2VkdS9zcmMvbGliL2F1dGgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgand0VmVyaWZ5LCBTaWduSldUIH0gZnJvbSAnam9zZSc7XG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgZGIgZnJvbSAnLi9kYic7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnQC90eXBlcyc7XG5cbi8vIFRoaXMgd291bGQgYmUgc3RvcmVkIGluIGFuIGVudmlyb25tZW50IHZhcmlhYmxlIGluIHByb2R1Y3Rpb25cbmNvbnN0IEpXVF9TRUNSRVQgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoJ3lvdXItc2VjcmV0LWtleScpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2lnbkp3dFRva2VuKHVzZXI6IFVzZXIpIHtcbiAgY29uc3QgdG9rZW4gPSBhd2FpdCBuZXcgU2lnbkpXVCh7IFxuICAgIGlkOiB1c2VyLmlkLFxuICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgIHJvbGU6IHVzZXIucm9sZSxcbiAgICBuYW1lOiB1c2VyLm5hbWVcbiAgfSlcbiAgICAuc2V0UHJvdGVjdGVkSGVhZGVyKHsgYWxnOiAnSFMyNTYnIH0pXG4gICAgLnNldElzc3VlZEF0KClcbiAgICAuc2V0RXhwaXJhdGlvblRpbWUoJzEyaCcpXG4gICAgLnNpZ24oSldUX1NFQ1JFVCk7XG5cbiAgcmV0dXJuIHRva2VuO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5Snd0VG9rZW4odG9rZW46IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IHsgcGF5bG9hZCB9ID0gYXdhaXQgand0VmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVUKTtcbiAgICByZXR1cm4gcGF5bG9hZDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9naW4oZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykge1xuICAvLyBJbiBhIHJlYWwgYXBwLCB3ZSB3b3VsZCB2ZXJpZnkgdGhlIHBhc3N3b3JkIGFnYWluc3QgYSBoYXNoZWQgdmFsdWUgaW4gdGhlIGRhdGFiYXNlXG4gIC8vIEZvciB0aGlzIGRlbW8sIHdlJ3JlIGp1c3QgY2hlY2tpbmcgaWYgdGhlIHVzZXIgZXhpc3RzXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBkYi5nZXRVc2VyQnlFbWFpbChlbWFpbCk7XG4gIGlmICghdXNlcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gSW4gYSByZWFsIGFwcCwgd2Ugd291bGQgdmVyaWZ5IHRoZSBwYXNzd29yZCBoZXJlXG4gIC8vIEZvciBkZW1vIHB1cnBvc2VzLCBsZXQncyBhc3N1bWUgdGhlIHBhc3N3b3JkIGlzIGNvcnJlY3RcblxuICBjb25zdCB0b2tlbiA9IGF3YWl0IHNpZ25Kd3RUb2tlbih1c2VyKTtcbiAgcmV0dXJuIHsgdXNlciwgdG9rZW4gfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ291dCgpIHtcbiAgY29va2llcygpLmRlbGV0ZSgndG9rZW4nKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlc3Npb24oKSB7XG4gIGNvbnN0IHRva2VuID0gY29va2llcygpLmdldCgndG9rZW4nKT8udmFsdWU7XG4gIGlmICghdG9rZW4pIHJldHVybiBudWxsO1xuXG4gIGNvbnN0IHBheWxvYWQgPSBhd2FpdCB2ZXJpZnlKd3RUb2tlbih0b2tlbik7XG4gIGlmICghcGF5bG9hZCkgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgdXNlciA9IGF3YWl0IGRiLmdldFVzZXJCeUlkKHBheWxvYWQuaWQgYXMgc3RyaW5nKTtcbiAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcblxuICByZXR1cm4geyB1c2VyIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1aXJlQXV0aChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuZ2V0KCd0b2tlbicpPy52YWx1ZTtcbiAgaWYgKCF0b2tlbikge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTCgnL2xvZ2luJywgcmVxLnVybCkpO1xuICB9XG5cbiAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHZlcmlmeUp3dFRva2VuKHRva2VuKTtcbiAgaWYgKCFwYXlsb2FkKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvbG9naW4nLCByZXEudXJsKSk7XG4gIH1cblxuICByZXR1cm4gbnVsbDsgLy8gTm8gcmVkaXJlY3QgbmVlZGVkLCB1c2VyIGlzIGF1dGhlbnRpY2F0ZWRcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrUm9sZShhbGxvd2VkUm9sZXM6IHN0cmluZ1tdKSB7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKCk7XG4gIGlmICghc2Vzc2lvbikgcmV0dXJuIGZhbHNlO1xuXG4gIHJldHVybiBhbGxvd2VkUm9sZXMuaW5jbHVkZXMoc2Vzc2lvbi51c2VyLnJvbGUpO1xufVxuIl0sIm5hbWVzIjpbImp3dFZlcmlmeSIsIlNpZ25KV1QiLCJjb29raWVzIiwiTmV4dFJlc3BvbnNlIiwiZGIiLCJKV1RfU0VDUkVUIiwiVGV4dEVuY29kZXIiLCJlbmNvZGUiLCJzaWduSnd0VG9rZW4iLCJ1c2VyIiwidG9rZW4iLCJpZCIsImVtYWlsIiwicm9sZSIsIm5hbWUiLCJzZXRQcm90ZWN0ZWRIZWFkZXIiLCJhbGciLCJzZXRJc3N1ZWRBdCIsInNldEV4cGlyYXRpb25UaW1lIiwic2lnbiIsInZlcmlmeUp3dFRva2VuIiwicGF5bG9hZCIsImVycm9yIiwibG9naW4iLCJwYXNzd29yZCIsImdldFVzZXJCeUVtYWlsIiwibG9nb3V0IiwiZGVsZXRlIiwiZ2V0U2Vzc2lvbiIsImdldCIsInZhbHVlIiwiZ2V0VXNlckJ5SWQiLCJyZXF1aXJlQXV0aCIsInJlcSIsInJlZGlyZWN0IiwiVVJMIiwidXJsIiwiY2hlY2tSb2xlIiwiYWxsb3dlZFJvbGVzIiwic2Vzc2lvbiIsImluY2x1ZGVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm/v4.js\");\n\n// In-memory storage\nclass InMemoryDB {\n    // Initialization with sample data for development\n    constructor(){\n        this.users = new Map();\n        this.students = new Map();\n        this.parents = new Map();\n        this.teachers = new Map();\n        this.principals = new Map();\n        this.classes = new Map();\n        this.assignments = new Map();\n        this.submissions = new Map();\n        this.grades = new Map();\n        this.attendance = new Map();\n        this.messages = new Map();\n        // Create seed data for initial login and testing\n        this.createSeedData();\n    }\n    createSeedData() {\n        // Create some users with different roles\n        const adminUser = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            name: 'Admin',\n            email: 'admin@school.edu',\n            role: 'principal',\n            avatarUrl: '/avatar-placeholder.svg'\n        };\n        const teacherUser = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            name: 'Teacher',\n            email: 'teacher@school.edu',\n            role: 'teacher',\n            avatarUrl: '/avatar-placeholder.svg'\n        };\n        const studentUser = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            name: 'Student',\n            email: 'student@school.edu',\n            role: 'student',\n            avatarUrl: '/avatar-placeholder.svg'\n        };\n        const parentUser = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            name: 'Parent',\n            email: 'parent@school.edu',\n            role: 'parent',\n            avatarUrl: '/avatar-placeholder.svg'\n        };\n        // Add users to database\n        this.users.set(adminUser.id, adminUser);\n        this.users.set(teacherUser.id, teacherUser);\n        this.users.set(studentUser.id, studentUser);\n        this.users.set(parentUser.id, parentUser);\n        // Create role-specific records\n        const principal = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            userId: adminUser.id,\n            schoolId: 'school-1'\n        };\n        const teacher = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            userId: teacherUser.id,\n            classIds: [],\n            subjectIds: [\n                'math',\n                'science'\n            ]\n        };\n        const student = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            userId: studentUser.id,\n            grade: 10,\n            classIds: [],\n            parentIds: []\n        };\n        const parent = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            userId: parentUser.id,\n            studentIds: [\n                student.id\n            ]\n        };\n        // Update relationships\n        student.parentIds.push(parent.id);\n        // Add role records to database\n        this.principals.set(principal.id, principal);\n        this.teachers.set(teacher.id, teacher);\n        this.students.set(student.id, student);\n        this.parents.set(parent.id, parent);\n        // Create a class\n        const classRecord = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            name: 'Mathematics 101',\n            teacherId: teacher.id,\n            studentIds: [\n                student.id\n            ],\n            subject: 'Mathematics',\n            schedule: [\n                {\n                    day: 'Monday',\n                    startTime: '09:00',\n                    endTime: '10:30'\n                },\n                {\n                    day: 'Wednesday',\n                    startTime: '09:00',\n                    endTime: '10:30'\n                }\n            ]\n        };\n        // Update relationships\n        teacher.classIds.push(classRecord.id);\n        student.classIds.push(classRecord.id);\n        // Add class to database\n        this.classes.set(classRecord.id, classRecord);\n        // Create assignments\n        const assignment = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            title: 'Algebra Basics',\n            description: 'Complete problems 1-10 in Chapter 3',\n            classId: classRecord.id,\n            dueDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),\n            createdAt: new Date().toISOString(),\n            maxPoints: 100\n        };\n        this.assignments.set(assignment.id, assignment);\n        // Create attendance records\n        const attendance = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            studentId: student.id,\n            classId: classRecord.id,\n            date: new Date().toISOString().split('T')[0],\n            status: 'present'\n        };\n        this.attendance.set(attendance.id, attendance);\n        // Create a message\n        const message = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(),\n            senderId: teacherUser.id,\n            recipientId: parentUser.id,\n            subject: 'Regarding upcoming parent-teacher meeting',\n            content: 'I would like to discuss your child\\'s progress in mathematics class.',\n            read: false,\n            createdAt: new Date().toISOString()\n        };\n        this.messages.set(message.id, message);\n    }\n    // User operations\n    async getUsers() {\n        return Array.from(this.users.values());\n    }\n    async getUserById(id) {\n        return this.users.get(id) || null;\n    }\n    async getUserByEmail(email) {\n        const users = Array.from(this.users.values());\n        return users.find((user)=>user.email === email) || null;\n    }\n    async createUser(user) {\n        const id = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const newUser = {\n            id,\n            ...user\n        };\n        this.users.set(id, newUser);\n        return newUser;\n    }\n    async updateUser(id, data) {\n        const user = this.users.get(id);\n        if (!user) return null;\n        const updatedUser = {\n            ...user,\n            ...data\n        };\n        this.users.set(id, updatedUser);\n        return updatedUser;\n    }\n    // Student operations\n    async getStudents() {\n        return Array.from(this.students.values()).map((student)=>({\n                ...student,\n                user: this.users.get(student.userId)\n            }));\n    }\n    async getStudentById(id) {\n        const student = this.students.get(id);\n        if (!student) return null;\n        const user = this.users.get(student.userId);\n        if (!user) return null;\n        return {\n            ...student,\n            user\n        };\n    }\n    async getStudentsByParentId(parentId) {\n        const parent = this.parents.get(parentId);\n        if (!parent) return [];\n        return parent.studentIds.map((id)=>this.students.get(id)).filter((student)=>student !== undefined).map((student)=>({\n                ...student,\n                user: this.users.get(student.userId)\n            }));\n    }\n    async getStudentsByClassId(classId) {\n        const classRecord = this.classes.get(classId);\n        if (!classRecord) return [];\n        return classRecord.studentIds.map((id)=>this.students.get(id)).filter((student)=>student !== undefined).map((student)=>({\n                ...student,\n                user: this.users.get(student.userId)\n            }));\n    }\n    // Class operations\n    async getClasses() {\n        return Array.from(this.classes.values());\n    }\n    async getClassById(id) {\n        return this.classes.get(id) || null;\n    }\n    async getClassesByTeacherId(teacherId) {\n        return Array.from(this.classes.values()).filter((c)=>c.teacherId === teacherId);\n    }\n    async getClassesByStudentId(studentId) {\n        return Array.from(this.classes.values()).filter((c)=>c.studentIds.includes(studentId));\n    }\n    // Assignment operations\n    async getAssignments() {\n        return Array.from(this.assignments.values());\n    }\n    async getAssignmentById(id) {\n        return this.assignments.get(id) || null;\n    }\n    async getAssignmentsByClassId(classId) {\n        return Array.from(this.assignments.values()).filter((a)=>a.classId === classId);\n    }\n    async createAssignment(assignment) {\n        const id = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const newAssignment = {\n            id,\n            ...assignment,\n            createdAt: new Date().toISOString()\n        };\n        this.assignments.set(id, newAssignment);\n        return newAssignment;\n    }\n    // Grade operations\n    async getGrades() {\n        return Array.from(this.grades.values());\n    }\n    async getGradesByStudentId(studentId) {\n        return Array.from(this.grades.values()).filter((g)=>g.studentId === studentId);\n    }\n    async getGradesByAssignmentId(assignmentId) {\n        return Array.from(this.grades.values()).filter((g)=>g.assignmentId === assignmentId);\n    }\n    async createGrade(grade) {\n        const id = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const newGrade = {\n            id,\n            ...grade,\n            createdAt: new Date().toISOString()\n        };\n        this.grades.set(id, newGrade);\n        return newGrade;\n    }\n    // Attendance operations\n    async getAttendance() {\n        return Array.from(this.attendance.values());\n    }\n    async getAttendanceByStudentId(studentId) {\n        return Array.from(this.attendance.values()).filter((a)=>a.studentId === studentId);\n    }\n    async getAttendanceByClassId(classId) {\n        return Array.from(this.attendance.values()).filter((a)=>a.classId === classId);\n    }\n    async createAttendance(attendance) {\n        const id = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const newAttendance = {\n            id,\n            ...attendance\n        };\n        this.attendance.set(id, newAttendance);\n        return newAttendance;\n    }\n    // Message operations\n    async getMessages() {\n        return Array.from(this.messages.values());\n    }\n    async getMessageById(id) {\n        return this.messages.get(id) || null;\n    }\n    async getMessagesBySenderId(senderId) {\n        return Array.from(this.messages.values()).filter((m)=>m.senderId === senderId);\n    }\n    async getMessagesByRecipientId(recipientId) {\n        return Array.from(this.messages.values()).filter((m)=>m.recipientId === recipientId);\n    }\n    async createMessage(message) {\n        const id = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const newMessage = {\n            id,\n            ...message,\n            read: false,\n            createdAt: new Date().toISOString()\n        };\n        this.messages.set(id, newMessage);\n        return newMessage;\n    }\n    async markMessageAsRead(id) {\n        const message = this.messages.get(id);\n        if (!message) return null;\n        const updatedMessage = {\n            ...message,\n            read: true\n        };\n        this.messages.set(id, updatedMessage);\n        return updatedMessage;\n    }\n    // School stats\n    async getSchoolStats() {\n        const students = this.students.size;\n        const teachers = this.teachers.size;\n        // Calculate average attendance\n        const attendanceRecords = Array.from(this.attendance.values());\n        const presentCount = attendanceRecords.filter((a)=>a.status === 'present' || a.status === 'tardy').length;\n        const attendanceRate = attendanceRecords.length ? presentCount / attendanceRecords.length : 0;\n        // Calculate average grade\n        const grades = Array.from(this.grades.values());\n        const totalPoints = grades.reduce((sum, grade)=>sum + grade.points, 0);\n        const averageGrade = grades.length ? totalPoints / grades.length : 0;\n        return {\n            totalStudents: students,\n            totalTeachers: teachers,\n            averageAttendance: attendanceRate * 100,\n            averageGrade\n        };\n    }\n}\n// Create a singleton instance\nconst db = new InMemoryDB();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (db);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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M0QsTUFBTXVELGVBQWVELGtCQUFrQnRDLE1BQU0sQ0FBQ1ksQ0FBQUEsSUFDNUNBLEVBQUVyQyxNQUFNLEtBQUssYUFBYXFDLEVBQUVyQyxNQUFNLEtBQUssU0FDdkNpRSxNQUFNO1FBQ1IsTUFBTUMsaUJBQWlCSCxrQkFBa0JFLE1BQU0sR0FBR0QsZUFBZUQsa0JBQWtCRSxNQUFNLEdBQUc7UUFFNUYsMEJBQTBCO1FBQzFCLE1BQU0vRyxTQUFTcUQsTUFBTUMsSUFBSSxDQUFDLElBQUksQ0FBQ3RELE1BQU0sQ0FBQ3VELE1BQU07UUFDNUMsTUFBTTBELGNBQWNqSCxPQUFPa0gsTUFBTSxDQUFDLENBQUNDLEtBQUs5RixRQUFVOEYsTUFBTTlGLE1BQU0rRixNQUFNLEVBQUU7UUFDdEUsTUFBTUMsZUFBZXJILE9BQU8rRyxNQUFNLEdBQUdFLGNBQWNqSCxPQUFPK0csTUFBTSxHQUFHO1FBRW5FLE9BQU87WUFDTE8sZUFBZTdIO1lBQ2Y4SCxlQUFlNUg7WUFDZjZILG1CQUFtQlIsaUJBQWlCO1lBQ3BDSztRQUNGO0lBQ0Y7QUFDRjtBQUVBLDhCQUE4QjtBQUM5QixNQUFNSSxLQUFLLElBQUlwSTtBQUVmLGlFQUFlb0ksRUFBRUEsRUFBQyIsInNvdXJjZXMiOlsiL3Jvb3Qvc2Nob29sL2VkdS9zcmMvbGliL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgXG4gIFVzZXIsIFN0dWRlbnQsIFBhcmVudCwgVGVhY2hlciwgUHJpbmNpcGFsLCBcbiAgQ2xhc3MsIEFzc2lnbm1lbnQsIFN1Ym1pc3Npb24sIEdyYWRlLCBBdHRlbmRhbmNlLCBNZXNzYWdlIFxufSBmcm9tICdAL3R5cGVzJztcblxuLy8gSW4tbWVtb3J5IHN0b3JhZ2VcbmNsYXNzIEluTWVtb3J5REIge1xuICBwcml2YXRlIHVzZXJzOiBNYXA8c3RyaW5nLCBVc2VyPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBzdHVkZW50czogTWFwPHN0cmluZywgU3R1ZGVudD4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgcGFyZW50czogTWFwPHN0cmluZywgUGFyZW50PiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSB0ZWFjaGVyczogTWFwPHN0cmluZywgVGVhY2hlcj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgcHJpbmNpcGFsczogTWFwPHN0cmluZywgUHJpbmNpcGFsPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBjbGFzc2VzOiBNYXA8c3RyaW5nLCBDbGFzcz4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgYXNzaWdubWVudHM6IE1hcDxzdHJpbmcsIEFzc2lnbm1lbnQ+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIHN1Ym1pc3Npb25zOiBNYXA8c3RyaW5nLCBTdWJtaXNzaW9uPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBncmFkZXM6IE1hcDxzdHJpbmcsIEdyYWRlPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBhdHRlbmRhbmNlOiBNYXA8c3RyaW5nLCBBdHRlbmRhbmNlPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBtZXNzYWdlczogTWFwPHN0cmluZywgTWVzc2FnZT4gPSBuZXcgTWFwKCk7XG4gIFxuICAvLyBJbml0aWFsaXphdGlvbiB3aXRoIHNhbXBsZSBkYXRhIGZvciBkZXZlbG9wbWVudFxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBDcmVhdGUgc2VlZCBkYXRhIGZvciBpbml0aWFsIGxvZ2luIGFuZCB0ZXN0aW5nXG4gICAgdGhpcy5jcmVhdGVTZWVkRGF0YSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVTZWVkRGF0YSgpIHtcbiAgICAvLyBDcmVhdGUgc29tZSB1c2VycyB3aXRoIGRpZmZlcmVudCByb2xlc1xuICAgIGNvbnN0IGFkbWluVXNlcjogVXNlciA9IHtcbiAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgIG5hbWU6ICdBZG1pbicsXG4gICAgICBlbWFpbDogJ2FkbWluQHNjaG9vbC5lZHUnLFxuICAgICAgcm9sZTogJ3ByaW5jaXBhbCcsXG4gICAgICBhdmF0YXJVcmw6ICcvYXZhdGFyLXBsYWNlaG9sZGVyLnN2ZydcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IHRlYWNoZXJVc2VyOiBVc2VyID0ge1xuICAgICAgaWQ6IHV1aWR2NCgpLFxuICAgICAgbmFtZTogJ1RlYWNoZXInLFxuICAgICAgZW1haWw6ICd0ZWFjaGVyQHNjaG9vbC5lZHUnLFxuICAgICAgcm9sZTogJ3RlYWNoZXInLFxuICAgICAgYXZhdGFyVXJsOiAnL2F2YXRhci1wbGFjZWhvbGRlci5zdmcnXG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBzdHVkZW50VXNlcjogVXNlciA9IHtcbiAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgIG5hbWU6ICdTdHVkZW50JyxcbiAgICAgIGVtYWlsOiAnc3R1ZGVudEBzY2hvb2wuZWR1JyxcbiAgICAgIHJvbGU6ICdzdHVkZW50JyxcbiAgICAgIGF2YXRhclVybDogJy9hdmF0YXItcGxhY2Vob2xkZXIuc3ZnJ1xuICAgIH07XG4gICAgXG4gICAgY29uc3QgcGFyZW50VXNlcjogVXNlciA9IHtcbiAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgIG5hbWU6ICdQYXJlbnQnLFxuICAgICAgZW1haWw6ICdwYXJlbnRAc2Nob29sLmVkdScsXG4gICAgICByb2xlOiAncGFyZW50JyxcbiAgICAgIGF2YXRhclVybDogJy9hdmF0YXItcGxhY2Vob2xkZXIuc3ZnJ1xuICAgIH07XG5cbiAgICAvLyBBZGQgdXNlcnMgdG8gZGF0YWJhc2VcbiAgICB0aGlzLnVzZXJzLnNldChhZG1pblVzZXIuaWQsIGFkbWluVXNlcik7XG4gICAgdGhpcy51c2Vycy5zZXQodGVhY2hlclVzZXIuaWQsIHRlYWNoZXJVc2VyKTtcbiAgICB0aGlzLnVzZXJzLnNldChzdHVkZW50VXNlci5pZCwgc3R1ZGVudFVzZXIpO1xuICAgIHRoaXMudXNlcnMuc2V0KHBhcmVudFVzZXIuaWQsIHBhcmVudFVzZXIpO1xuXG4gICAgLy8gQ3JlYXRlIHJvbGUtc3BlY2lmaWMgcmVjb3Jkc1xuICAgIGNvbnN0IHByaW5jaXBhbDogUHJpbmNpcGFsID0ge1xuICAgICAgaWQ6IHV1aWR2NCgpLFxuICAgICAgdXNlcklkOiBhZG1pblVzZXIuaWQsXG4gICAgICBzY2hvb2xJZDogJ3NjaG9vbC0xJ1xuICAgIH07XG5cbiAgICBjb25zdCB0ZWFjaGVyOiBUZWFjaGVyID0ge1xuICAgICAgaWQ6IHV1aWR2NCgpLFxuICAgICAgdXNlcklkOiB0ZWFjaGVyVXNlci5pZCxcbiAgICAgIGNsYXNzSWRzOiBbXSxcbiAgICAgIHN1YmplY3RJZHM6IFsnbWF0aCcsICdzY2llbmNlJ11cbiAgICB9O1xuXG4gICAgY29uc3Qgc3R1ZGVudDogU3R1ZGVudCA9IHtcbiAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgIHVzZXJJZDogc3R1ZGVudFVzZXIuaWQsXG4gICAgICBncmFkZTogMTAsXG4gICAgICBjbGFzc0lkczogW10sXG4gICAgICBwYXJlbnRJZHM6IFtdXG4gICAgfTtcblxuICAgIGNvbnN0IHBhcmVudDogUGFyZW50ID0ge1xuICAgICAgaWQ6IHV1aWR2NCgpLFxuICAgICAgdXNlcklkOiBwYXJlbnRVc2VyLmlkLFxuICAgICAgc3R1ZGVudElkczogW3N0dWRlbnQuaWRdXG4gICAgfTtcblxuICAgIC8vIFVwZGF0ZSByZWxhdGlvbnNoaXBzXG4gICAgc3R1ZGVudC5wYXJlbnRJZHMucHVzaChwYXJlbnQuaWQpO1xuXG4gICAgLy8gQWRkIHJvbGUgcmVjb3JkcyB0byBkYXRhYmFzZVxuICAgIHRoaXMucHJpbmNpcGFscy5zZXQocHJpbmNpcGFsLmlkLCBwcmluY2lwYWwpO1xuICAgIHRoaXMudGVhY2hlcnMuc2V0KHRlYWNoZXIuaWQsIHRlYWNoZXIpO1xuICAgIHRoaXMuc3R1ZGVudHMuc2V0KHN0dWRlbnQuaWQsIHN0dWRlbnQpO1xuICAgIHRoaXMucGFyZW50cy5zZXQocGFyZW50LmlkLCBwYXJlbnQpO1xuXG4gICAgLy8gQ3JlYXRlIGEgY2xhc3NcbiAgICBjb25zdCBjbGFzc1JlY29yZDogQ2xhc3MgPSB7XG4gICAgICBpZDogdXVpZHY0KCksXG4gICAgICBuYW1lOiAnTWF0aGVtYXRpY3MgMTAxJyxcbiAgICAgIHRlYWNoZXJJZDogdGVhY2hlci5pZCxcbiAgICAgIHN0dWRlbnRJZHM6IFtzdHVkZW50LmlkXSxcbiAgICAgIHN1YmplY3Q6ICdNYXRoZW1hdGljcycsXG4gICAgICBzY2hlZHVsZTogW1xuICAgICAgICB7IGRheTogJ01vbmRheScsIHN0YXJ0VGltZTogJzA5OjAwJywgZW5kVGltZTogJzEwOjMwJyB9LFxuICAgICAgICB7IGRheTogJ1dlZG5lc2RheScsIHN0YXJ0VGltZTogJzA5OjAwJywgZW5kVGltZTogJzEwOjMwJyB9XG4gICAgICBdXG4gICAgfTtcblxuICAgIC8vIFVwZGF0ZSByZWxhdGlvbnNoaXBzXG4gICAgdGVhY2hlci5jbGFzc0lkcy5wdXNoKGNsYXNzUmVjb3JkLmlkKTtcbiAgICBzdHVkZW50LmNsYXNzSWRzLnB1c2goY2xhc3NSZWNvcmQuaWQpO1xuXG4gICAgLy8gQWRkIGNsYXNzIHRvIGRhdGFiYXNlXG4gICAgdGhpcy5jbGFzc2VzLnNldChjbGFzc1JlY29yZC5pZCwgY2xhc3NSZWNvcmQpO1xuXG4gICAgLy8gQ3JlYXRlIGFzc2lnbm1lbnRzXG4gICAgY29uc3QgYXNzaWdubWVudDogQXNzaWdubWVudCA9IHtcbiAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgIHRpdGxlOiAnQWxnZWJyYSBCYXNpY3MnLFxuICAgICAgZGVzY3JpcHRpb246ICdDb21wbGV0ZSBwcm9ibGVtcyAxLTEwIGluIENoYXB0ZXIgMycsXG4gICAgICBjbGFzc0lkOiBjbGFzc1JlY29yZC5pZCxcbiAgICAgIGR1ZURhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyA3ICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgbWF4UG9pbnRzOiAxMDBcbiAgICB9O1xuXG4gICAgdGhpcy5hc3NpZ25tZW50cy5zZXQoYXNzaWdubWVudC5pZCwgYXNzaWdubWVudCk7XG5cbiAgICAvLyBDcmVhdGUgYXR0ZW5kYW5jZSByZWNvcmRzXG4gICAgY29uc3QgYXR0ZW5kYW5jZTogQXR0ZW5kYW5jZSA9IHtcbiAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgIHN0dWRlbnRJZDogc3R1ZGVudC5pZCxcbiAgICAgIGNsYXNzSWQ6IGNsYXNzUmVjb3JkLmlkLFxuICAgICAgZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgICBzdGF0dXM6ICdwcmVzZW50J1xuICAgIH07XG5cbiAgICB0aGlzLmF0dGVuZGFuY2Uuc2V0KGF0dGVuZGFuY2UuaWQsIGF0dGVuZGFuY2UpO1xuXG4gICAgLy8gQ3JlYXRlIGEgbWVzc2FnZVxuICAgIGNvbnN0IG1lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICBpZDogdXVpZHY0KCksXG4gICAgICBzZW5kZXJJZDogdGVhY2hlclVzZXIuaWQsXG4gICAgICByZWNpcGllbnRJZDogcGFyZW50VXNlci5pZCxcbiAgICAgIHN1YmplY3Q6ICdSZWdhcmRpbmcgdXBjb21pbmcgcGFyZW50LXRlYWNoZXIgbWVldGluZycsXG4gICAgICBjb250ZW50OiAnSSB3b3VsZCBsaWtlIHRvIGRpc2N1c3MgeW91ciBjaGlsZFxcJ3MgcHJvZ3Jlc3MgaW4gbWF0aGVtYXRpY3MgY2xhc3MuJyxcbiAgICAgIHJlYWQ6IGZhbHNlLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuXG4gICAgdGhpcy5tZXNzYWdlcy5zZXQobWVzc2FnZS5pZCwgbWVzc2FnZSk7XG4gIH1cblxuICAvLyBVc2VyIG9wZXJhdGlvbnNcbiAgYXN5bmMgZ2V0VXNlcnMoKTogUHJvbWlzZTxVc2VyW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnVzZXJzLnZhbHVlcygpKTtcbiAgfVxuXG4gIGFzeW5jIGdldFVzZXJCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMudXNlcnMuZ2V0KGlkKSB8fCBudWxsO1xuICB9XG5cbiAgYXN5bmMgZ2V0VXNlckJ5RW1haWwoZW1haWw6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcbiAgICBjb25zdCB1c2VycyA9IEFycmF5LmZyb20odGhpcy51c2Vycy52YWx1ZXMoKSk7XG4gICAgcmV0dXJuIHVzZXJzLmZpbmQodXNlciA9PiB1c2VyLmVtYWlsID09PSBlbWFpbCkgfHwgbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVVzZXIodXNlcjogT21pdDxVc2VyLCAnaWQnPik6IFByb21pc2U8VXNlcj4ge1xuICAgIGNvbnN0IGlkID0gdXVpZHY0KCk7XG4gICAgY29uc3QgbmV3VXNlciA9IHsgaWQsIC4uLnVzZXIgfTtcbiAgICB0aGlzLnVzZXJzLnNldChpZCwgbmV3VXNlcik7XG4gICAgcmV0dXJuIG5ld1VzZXI7XG4gIH1cblxuICBhc3luYyB1cGRhdGVVc2VyKGlkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8VXNlcj4pOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gICAgY29uc3QgdXNlciA9IHRoaXMudXNlcnMuZ2V0KGlkKTtcbiAgICBpZiAoIXVzZXIpIHJldHVybiBudWxsO1xuICAgIFxuICAgIGNvbnN0IHVwZGF0ZWRVc2VyID0geyAuLi51c2VyLCAuLi5kYXRhIH07XG4gICAgdGhpcy51c2Vycy5zZXQoaWQsIHVwZGF0ZWRVc2VyKTtcbiAgICByZXR1cm4gdXBkYXRlZFVzZXI7XG4gIH1cblxuICAvLyBTdHVkZW50IG9wZXJhdGlvbnNcbiAgYXN5bmMgZ2V0U3R1ZGVudHMoKTogUHJvbWlzZTwoU3R1ZGVudCAmIHsgdXNlcjogVXNlciB9KVtdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5zdHVkZW50cy52YWx1ZXMoKSkubWFwKHN0dWRlbnQgPT4gKHtcbiAgICAgIC4uLnN0dWRlbnQsXG4gICAgICB1c2VyOiB0aGlzLnVzZXJzLmdldChzdHVkZW50LnVzZXJJZCkhXG4gICAgfSkpO1xuICB9XG5cbiAgYXN5bmMgZ2V0U3R1ZGVudEJ5SWQoaWQ6IHN0cmluZyk6IFByb21pc2U8KFN0dWRlbnQgJiB7IHVzZXI6IFVzZXIgfSkgfCBudWxsPiB7XG4gICAgY29uc3Qgc3R1ZGVudCA9IHRoaXMuc3R1ZGVudHMuZ2V0KGlkKTtcbiAgICBpZiAoIXN0dWRlbnQpIHJldHVybiBudWxsO1xuICAgIFxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLnVzZXJzLmdldChzdHVkZW50LnVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICByZXR1cm4geyAuLi5zdHVkZW50LCB1c2VyIH07XG4gIH1cblxuICBhc3luYyBnZXRTdHVkZW50c0J5UGFyZW50SWQocGFyZW50SWQ6IHN0cmluZyk6IFByb21pc2U8KFN0dWRlbnQgJiB7IHVzZXI6IFVzZXIgfSlbXT4ge1xuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMucGFyZW50cy5nZXQocGFyZW50SWQpO1xuICAgIGlmICghcGFyZW50KSByZXR1cm4gW107XG4gICAgXG4gICAgcmV0dXJuIHBhcmVudC5zdHVkZW50SWRzXG4gICAgICAubWFwKGlkID0+IHRoaXMuc3R1ZGVudHMuZ2V0KGlkKSlcbiAgICAgIC5maWx0ZXIoKHN0dWRlbnQpOiBzdHVkZW50IGlzIFN0dWRlbnQgPT4gc3R1ZGVudCAhPT0gdW5kZWZpbmVkKVxuICAgICAgLm1hcChzdHVkZW50ID0+ICh7XG4gICAgICAgIC4uLnN0dWRlbnQsXG4gICAgICAgIHVzZXI6IHRoaXMudXNlcnMuZ2V0KHN0dWRlbnQudXNlcklkKSFcbiAgICAgIH0pKTtcbiAgfVxuXG4gIGFzeW5jIGdldFN0dWRlbnRzQnlDbGFzc0lkKGNsYXNzSWQ6IHN0cmluZyk6IFByb21pc2U8KFN0dWRlbnQgJiB7IHVzZXI6IFVzZXIgfSlbXT4ge1xuICAgIGNvbnN0IGNsYXNzUmVjb3JkID0gdGhpcy5jbGFzc2VzLmdldChjbGFzc0lkKTtcbiAgICBpZiAoIWNsYXNzUmVjb3JkKSByZXR1cm4gW107XG4gICAgXG4gICAgcmV0dXJuIGNsYXNzUmVjb3JkLnN0dWRlbnRJZHNcbiAgICAgIC5tYXAoaWQgPT4gdGhpcy5zdHVkZW50cy5nZXQoaWQpKVxuICAgICAgLmZpbHRlcigoc3R1ZGVudCk6IHN0dWRlbnQgaXMgU3R1ZGVudCA9PiBzdHVkZW50ICE9PSB1bmRlZmluZWQpXG4gICAgICAubWFwKHN0dWRlbnQgPT4gKHtcbiAgICAgICAgLi4uc3R1ZGVudCxcbiAgICAgICAgdXNlcjogdGhpcy51c2Vycy5nZXQoc3R1ZGVudC51c2VySWQpIVxuICAgICAgfSkpO1xuICB9XG5cbiAgLy8gQ2xhc3Mgb3BlcmF0aW9uc1xuICBhc3luYyBnZXRDbGFzc2VzKCk6IFByb21pc2U8Q2xhc3NbXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuY2xhc3Nlcy52YWx1ZXMoKSk7XG4gIH1cblxuICBhc3luYyBnZXRDbGFzc0J5SWQoaWQ6IHN0cmluZyk6IFByb21pc2U8Q2xhc3MgfCBudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuY2xhc3Nlcy5nZXQoaWQpIHx8IG51bGw7XG4gIH1cblxuICBhc3luYyBnZXRDbGFzc2VzQnlUZWFjaGVySWQodGVhY2hlcklkOiBzdHJpbmcpOiBQcm9taXNlPENsYXNzW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmNsYXNzZXMudmFsdWVzKCkpLmZpbHRlcihjID0+IGMudGVhY2hlcklkID09PSB0ZWFjaGVySWQpO1xuICB9XG5cbiAgYXN5bmMgZ2V0Q2xhc3Nlc0J5U3R1ZGVudElkKHN0dWRlbnRJZDogc3RyaW5nKTogUHJvbWlzZTxDbGFzc1tdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5jbGFzc2VzLnZhbHVlcygpKS5maWx0ZXIoYyA9PiBjLnN0dWRlbnRJZHMuaW5jbHVkZXMoc3R1ZGVudElkKSk7XG4gIH1cblxuICAvLyBBc3NpZ25tZW50IG9wZXJhdGlvbnNcbiAgYXN5bmMgZ2V0QXNzaWdubWVudHMoKTogUHJvbWlzZTxBc3NpZ25tZW50W10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmFzc2lnbm1lbnRzLnZhbHVlcygpKTtcbiAgfVxuXG4gIGFzeW5jIGdldEFzc2lnbm1lbnRCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPEFzc2lnbm1lbnQgfCBudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMuYXNzaWdubWVudHMuZ2V0KGlkKSB8fCBudWxsO1xuICB9XG5cbiAgYXN5bmMgZ2V0QXNzaWdubWVudHNCeUNsYXNzSWQoY2xhc3NJZDogc3RyaW5nKTogUHJvbWlzZTxBc3NpZ25tZW50W10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmFzc2lnbm1lbnRzLnZhbHVlcygpKS5maWx0ZXIoYSA9PiBhLmNsYXNzSWQgPT09IGNsYXNzSWQpO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlQXNzaWdubWVudChhc3NpZ25tZW50OiBPbWl0PEFzc2lnbm1lbnQsICdpZCcgfCAnY3JlYXRlZEF0Jz4pOiBQcm9taXNlPEFzc2lnbm1lbnQ+IHtcbiAgICBjb25zdCBpZCA9IHV1aWR2NCgpO1xuICAgIGNvbnN0IG5ld0Fzc2lnbm1lbnQgPSB7IFxuICAgICAgaWQsIFxuICAgICAgLi4uYXNzaWdubWVudCxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcbiAgICB0aGlzLmFzc2lnbm1lbnRzLnNldChpZCwgbmV3QXNzaWdubWVudCk7XG4gICAgcmV0dXJuIG5ld0Fzc2lnbm1lbnQ7XG4gIH1cblxuICAvLyBHcmFkZSBvcGVyYXRpb25zXG4gIGFzeW5jIGdldEdyYWRlcygpOiBQcm9taXNlPEdyYWRlW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmdyYWRlcy52YWx1ZXMoKSk7XG4gIH1cblxuICBhc3luYyBnZXRHcmFkZXNCeVN0dWRlbnRJZChzdHVkZW50SWQ6IHN0cmluZyk6IFByb21pc2U8R3JhZGVbXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZ3JhZGVzLnZhbHVlcygpKS5maWx0ZXIoZyA9PiBnLnN0dWRlbnRJZCA9PT0gc3R1ZGVudElkKTtcbiAgfVxuXG4gIGFzeW5jIGdldEdyYWRlc0J5QXNzaWdubWVudElkKGFzc2lnbm1lbnRJZDogc3RyaW5nKTogUHJvbWlzZTxHcmFkZVtdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5ncmFkZXMudmFsdWVzKCkpLmZpbHRlcihnID0+IGcuYXNzaWdubWVudElkID09PSBhc3NpZ25tZW50SWQpO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlR3JhZGUoZ3JhZGU6IE9taXQ8R3JhZGUsICdpZCcgfCAnY3JlYXRlZEF0Jz4pOiBQcm9taXNlPEdyYWRlPiB7XG4gICAgY29uc3QgaWQgPSB1dWlkdjQoKTtcbiAgICBjb25zdCBuZXdHcmFkZSA9IHsgXG4gICAgICBpZCwgXG4gICAgICAuLi5ncmFkZSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcbiAgICB0aGlzLmdyYWRlcy5zZXQoaWQsIG5ld0dyYWRlKTtcbiAgICByZXR1cm4gbmV3R3JhZGU7XG4gIH1cblxuICAvLyBBdHRlbmRhbmNlIG9wZXJhdGlvbnNcbiAgYXN5bmMgZ2V0QXR0ZW5kYW5jZSgpOiBQcm9taXNlPEF0dGVuZGFuY2VbXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYXR0ZW5kYW5jZS52YWx1ZXMoKSk7XG4gIH1cblxuICBhc3luYyBnZXRBdHRlbmRhbmNlQnlTdHVkZW50SWQoc3R1ZGVudElkOiBzdHJpbmcpOiBQcm9taXNlPEF0dGVuZGFuY2VbXT4ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuYXR0ZW5kYW5jZS52YWx1ZXMoKSkuZmlsdGVyKGEgPT4gYS5zdHVkZW50SWQgPT09IHN0dWRlbnRJZCk7XG4gIH1cblxuICBhc3luYyBnZXRBdHRlbmRhbmNlQnlDbGFzc0lkKGNsYXNzSWQ6IHN0cmluZyk6IFByb21pc2U8QXR0ZW5kYW5jZVtdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5hdHRlbmRhbmNlLnZhbHVlcygpKS5maWx0ZXIoYSA9PiBhLmNsYXNzSWQgPT09IGNsYXNzSWQpO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlQXR0ZW5kYW5jZShhdHRlbmRhbmNlOiBPbWl0PEF0dGVuZGFuY2UsICdpZCc+KTogUHJvbWlzZTxBdHRlbmRhbmNlPiB7XG4gICAgY29uc3QgaWQgPSB1dWlkdjQoKTtcbiAgICBjb25zdCBuZXdBdHRlbmRhbmNlID0geyBpZCwgLi4uYXR0ZW5kYW5jZSB9O1xuICAgIHRoaXMuYXR0ZW5kYW5jZS5zZXQoaWQsIG5ld0F0dGVuZGFuY2UpO1xuICAgIHJldHVybiBuZXdBdHRlbmRhbmNlO1xuICB9XG5cbiAgLy8gTWVzc2FnZSBvcGVyYXRpb25zXG4gIGFzeW5jIGdldE1lc3NhZ2VzKCk6IFByb21pc2U8TWVzc2FnZVtdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5tZXNzYWdlcy52YWx1ZXMoKSk7XG4gIH1cblxuICBhc3luYyBnZXRNZXNzYWdlQnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxNZXNzYWdlIHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLm1lc3NhZ2VzLmdldChpZCkgfHwgbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGdldE1lc3NhZ2VzQnlTZW5kZXJJZChzZW5kZXJJZDogc3RyaW5nKTogUHJvbWlzZTxNZXNzYWdlW10+IHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLm1lc3NhZ2VzLnZhbHVlcygpKS5maWx0ZXIobSA9PiBtLnNlbmRlcklkID09PSBzZW5kZXJJZCk7XG4gIH1cblxuICBhc3luYyBnZXRNZXNzYWdlc0J5UmVjaXBpZW50SWQocmVjaXBpZW50SWQ6IHN0cmluZyk6IFByb21pc2U8TWVzc2FnZVtdPiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5tZXNzYWdlcy52YWx1ZXMoKSkuZmlsdGVyKG0gPT4gbS5yZWNpcGllbnRJZCA9PT0gcmVjaXBpZW50SWQpO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlTWVzc2FnZShtZXNzYWdlOiBPbWl0PE1lc3NhZ2UsICdpZCcgfCAnY3JlYXRlZEF0JyB8ICdyZWFkJz4pOiBQcm9taXNlPE1lc3NhZ2U+IHtcbiAgICBjb25zdCBpZCA9IHV1aWR2NCgpO1xuICAgIGNvbnN0IG5ld01lc3NhZ2UgPSB7IFxuICAgICAgaWQsIFxuICAgICAgLi4ubWVzc2FnZSxcbiAgICAgIHJlYWQ6IGZhbHNlLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICAgIHRoaXMubWVzc2FnZXMuc2V0KGlkLCBuZXdNZXNzYWdlKTtcbiAgICByZXR1cm4gbmV3TWVzc2FnZTtcbiAgfVxuXG4gIGFzeW5jIG1hcmtNZXNzYWdlQXNSZWFkKGlkOiBzdHJpbmcpOiBQcm9taXNlPE1lc3NhZ2UgfCBudWxsPiB7XG4gICAgY29uc3QgbWVzc2FnZSA9IHRoaXMubWVzc2FnZXMuZ2V0KGlkKTtcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsO1xuICAgIFxuICAgIGNvbnN0IHVwZGF0ZWRNZXNzYWdlID0geyAuLi5tZXNzYWdlLCByZWFkOiB0cnVlIH07XG4gICAgdGhpcy5tZXNzYWdlcy5zZXQoaWQsIHVwZGF0ZWRNZXNzYWdlKTtcbiAgICByZXR1cm4gdXBkYXRlZE1lc3NhZ2U7XG4gIH1cblxuICAvLyBTY2hvb2wgc3RhdHNcbiAgYXN5bmMgZ2V0U2Nob29sU3RhdHMoKTogUHJvbWlzZTx7XG4gICAgdG90YWxTdHVkZW50czogbnVtYmVyO1xuICAgIHRvdGFsVGVhY2hlcnM6IG51bWJlcjtcbiAgICBhdmVyYWdlQXR0ZW5kYW5jZTogbnVtYmVyO1xuICAgIGF2ZXJhZ2VHcmFkZTogbnVtYmVyO1xuICB9PiB7XG4gICAgY29uc3Qgc3R1ZGVudHMgPSB0aGlzLnN0dWRlbnRzLnNpemU7XG4gICAgY29uc3QgdGVhY2hlcnMgPSB0aGlzLnRlYWNoZXJzLnNpemU7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIGF2ZXJhZ2UgYXR0ZW5kYW5jZVxuICAgIGNvbnN0IGF0dGVuZGFuY2VSZWNvcmRzID0gQXJyYXkuZnJvbSh0aGlzLmF0dGVuZGFuY2UudmFsdWVzKCkpO1xuICAgIGNvbnN0IHByZXNlbnRDb3VudCA9IGF0dGVuZGFuY2VSZWNvcmRzLmZpbHRlcihhID0+IFxuICAgICAgYS5zdGF0dXMgPT09ICdwcmVzZW50JyB8fCBhLnN0YXR1cyA9PT0gJ3RhcmR5J1xuICAgICkubGVuZ3RoO1xuICAgIGNvbnN0IGF0dGVuZGFuY2VSYXRlID0gYXR0ZW5kYW5jZVJlY29yZHMubGVuZ3RoID8gcHJlc2VudENvdW50IC8gYXR0ZW5kYW5jZVJlY29yZHMubGVuZ3RoIDogMDtcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgYXZlcmFnZSBncmFkZVxuICAgIGNvbnN0IGdyYWRlcyA9IEFycmF5LmZyb20odGhpcy5ncmFkZXMudmFsdWVzKCkpO1xuICAgIGNvbnN0IHRvdGFsUG9pbnRzID0gZ3JhZGVzLnJlZHVjZSgoc3VtLCBncmFkZSkgPT4gc3VtICsgZ3JhZGUucG9pbnRzLCAwKTtcbiAgICBjb25zdCBhdmVyYWdlR3JhZGUgPSBncmFkZXMubGVuZ3RoID8gdG90YWxQb2ludHMgLyBncmFkZXMubGVuZ3RoIDogMDtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxTdHVkZW50czogc3R1ZGVudHMsXG4gICAgICB0b3RhbFRlYWNoZXJzOiB0ZWFjaGVycyxcbiAgICAgIGF2ZXJhZ2VBdHRlbmRhbmNlOiBhdHRlbmRhbmNlUmF0ZSAqIDEwMCwgLy8gYXMgcGVyY2VudGFnZVxuICAgICAgYXZlcmFnZUdyYWRlXG4gICAgfTtcbiAgfVxufVxuXG4vLyBDcmVhdGUgYSBzaW5nbGV0b24gaW5zdGFuY2VcbmNvbnN0IGRiID0gbmV3IEluTWVtb3J5REIoKTtcblxuZXhwb3J0IGRlZmF1bHQgZGI7XG4iXSwibmFtZXMiOlsidjQiLCJ1dWlkdjQiLCJJbk1lbW9yeURCIiwiY29uc3RydWN0b3IiLCJ1c2VycyIsIk1hcCIsInN0dWRlbnRzIiwicGFyZW50cyIsInRlYWNoZXJzIiwicHJpbmNpcGFscyIsImNsYXNzZXMiLCJhc3NpZ25tZW50cyIsInN1Ym1pc3Npb25zIiwiZ3JhZGVzIiwiYXR0ZW5kYW5jZSIsIm1lc3NhZ2VzIiwiY3JlYXRlU2VlZERhdGEiLCJhZG1pblVzZXIiLCJpZCIsIm5hbWUiLCJlbWFpbCIsInJvbGUiLCJhdmF0YXJVcmwiLCJ0ZWFjaGVyVXNlciIsInN0dWRlbnRVc2VyIiwicGFyZW50VXNlciIsInNldCIsInByaW5jaXBhbCIsInVzZXJJZCIsInNjaG9vbElkIiwidGVhY2hlciIsImNsYXNzSWRzIiwic3ViamVjdElkcyIsInN0dWRlbnQiLCJncmFkZSIsInBhcmVudElkcyIsInBhcmVudCIsInN0dWRlbnRJZHMiLCJwdXNoIiwiY2xhc3NSZWNvcmQiLCJ0ZWFjaGVySWQiLCJzdWJqZWN0Iiwic2NoZWR1bGUiLCJkYXkiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwiYXNzaWdubWVudCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJjbGFzc0lkIiwiZHVlRGF0ZSIsIkRhdGUiLCJub3ciLCJ0b0lTT1N0cmluZyIsImNyZWF0ZWRBdCIsIm1heFBvaW50cyIsInN0dWRlbnRJZCIsImRhdGUiLCJzcGxpdCIsInN0YXR1cyIsIm1lc3NhZ2UiLCJzZW5kZXJJZCIsInJlY2lwaWVudElkIiwiY29udGVudCIsInJlYWQiLCJnZXRVc2VycyIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsImdldFVzZXJCeUlkIiwiZ2V0IiwiZ2V0VXNlckJ5RW1haWwiLCJmaW5kIiwidXNlciIsImNyZWF0ZVVzZXIiLCJuZXdVc2VyIiwidXBkYXRlVXNlciIsImRhdGEiLCJ1cGRhdGVkVXNlciIsImdldFN0dWRlbnRzIiwibWFwIiwiZ2V0U3R1ZGVudEJ5SWQiLCJnZXRTdHVkZW50c0J5UGFyZW50SWQiLCJwYXJlbnRJZCIsImZpbHRlciIsInVuZGVmaW5lZCIsImdldFN0dWRlbnRzQnlDbGFzc0lkIiwiZ2V0Q2xhc3NlcyIsImdldENsYXNzQnlJZCIsImdldENsYXNzZXNCeVRlYWNoZXJJZCIsImMiLCJnZXRDbGFzc2VzQnlTdHVkZW50SWQiLCJpbmNsdWRlcyIsImdldEFzc2lnbm1lbnRzIiwiZ2V0QXNzaWdubWVudEJ5SWQiLCJnZXRBc3NpZ25tZW50c0J5Q2xhc3NJZCIsImEiLCJjcmVhdGVBc3NpZ25tZW50IiwibmV3QXNzaWdubWVudCIsImdldEdyYWRlcyIsImdldEdyYWRlc0J5U3R1ZGVudElkIiwiZyIsImdldEdyYWRlc0J5QXNzaWdubWVudElkIiwiYXNzaWdubWVudElkIiwiY3JlYXRlR3JhZGUiLCJuZXdHcmFkZSIsImdldEF0dGVuZGFuY2UiLCJnZXRBdHRlbmRhbmNlQnlTdHVkZW50SWQiLCJnZXRBdHRlbmRhbmNlQnlDbGFzc0lkIiwiY3JlYXRlQXR0ZW5kYW5jZSIsIm5ld0F0dGVuZGFuY2UiLCJnZXRNZXNzYWdlcyIsImdldE1lc3NhZ2VCeUlkIiwiZ2V0TWVzc2FnZXNCeVNlbmRlcklkIiwibSIsImdldE1lc3NhZ2VzQnlSZWNpcGllbnRJZCIsImNyZWF0ZU1lc3NhZ2UiLCJuZXdNZXNzYWdlIiwibWFya01lc3NhZ2VBc1JlYWQiLCJ1cGRhdGVkTWVzc2FnZSIsImdldFNjaG9vbFN0YXRzIiwic2l6ZSIsImF0dGVuZGFuY2VSZWNvcmRzIiwicHJlc2VudENvdW50IiwibGVuZ3RoIiwiYXR0ZW5kYW5jZVJhdGUiLCJ0b3RhbFBvaW50cyIsInJlZHVjZSIsInN1bSIsInBvaW50cyIsImF2ZXJhZ2VHcmFkZSIsInRvdGFsU3R1ZGVudHMiLCJ0b3RhbFRlYWNoZXJzIiwiYXZlcmFnZUF0dGVuZGFuY2UiLCJkYiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/jose","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fclasses%2Fmy-classes%2Froute&page=%2Fapi%2Fclasses%2Fmy-classes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclasses%2Fmy-classes%2Froute.ts&appDir=%2Froot%2Fschool%2Fedu%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Froot%2Fschool%2Fedu&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();